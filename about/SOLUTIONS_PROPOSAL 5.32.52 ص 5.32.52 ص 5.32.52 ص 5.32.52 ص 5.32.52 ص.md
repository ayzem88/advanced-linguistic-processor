# ุญููู ููุชุฑุญุฉ ููุดููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุถุฎูุฉ

## ุงููุดููุฉ ุงูุญุงููุฉ
- 30,000 ูุชุงุจ ูู ูุงุนุฏุฉ ุจูุงูุงุช SQLite ูุงุญุฏุฉ
- ุญุฌู ุงูููู: +100 ุบูุบุงุจุงูุช
- ูุดู ูู ุงููุฑุงุกุฉ ูุจุทุก ุดุฏูุฏ ูู ุงูุจุญุซ

---

## โญ ุงูุญููู ุงูููุชุฑุญุฉ (ูุฑุชุจุฉ ูู ุงูุฃูุถู ุฅูู ุงูุฃูู)

### 1๏ธโฃ **ุชูุณูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (Database Sharding) - ุงูุญู ุงูุฃูุซู โ**

#### ุงููููุฒุงุช:
- ูุญุงูุธ ุนูู ุงูุจููุฉ ุงูุญุงููุฉ ููุจุฑูุงูุฌ
- ูุง ูุญุชุงุฌ ุชุบููุฑุงุช ูุจูุฑุฉ
- ุณุฑุนุฉ ููุชุงุฒุฉ ูู ุงูุจุญุซ
- ูุฏุนู SQLite ุจููุงุกุฉ

#### ุงูุทุฑููุฉ:
```
data/
  โโโ books_0000_0999.db     (ุฃูู 1000 ูุชุงุจ)
  โโโ books_1000_1999.db     (ุงูุฃูู ุงูุซุงูู)
  โโโ books_2000_2999.db     (ุงูุฃูู ุงูุซุงูุซ)
  โโโ ...
  โโโ books_29000_29999.db   (ุขุฎุฑ ุฃูู)
```

#### ุงูุญุฏ ุงูุฃูุซู:
- **1000-2000 ูุชุงุจ** ููู ูุงุนุฏุฉ ุจูุงูุงุช (ุญูุงูู 3-6 ุบูุบุง)
- ุจุญุซ ูุชูุงุฒู ูู ุฌููุน ุงูููุงุนุฏ
- ุฅุฏุงุฑุฉ ูุฑูุฒูุฉ ุนุจุฑ `ShardedDB` class

#### ุงูุชูููุฐ:
- ุฅูุดุงุก `ShardedDB` manager
- ุงูุจุญุซ ูู ุฌููุน ุงูููุงุนุฏ ุจุงูุชูุงุฒู
- ุฏูุฌ ุงููุชุงุฆุฌ ูุชุฑุชูุจูุง

---

### 2๏ธโฃ **ุงูุชุฎุฒูู ุงููุฌูู (Hybrid Storage)**

#### ุงููููุฒุงุช:
- SQLite ููููุฑุณุฉ ูุงูุจุญุซ ููุท
- ูููุงุช ูุตูุฉ ูููุตูุฉ ูููุญุชูู
- ุชูุงุฒู ุจูู ุงูุณุฑุนุฉ ูุงูุญุฌู

#### ุงูุจููุฉ:
```
data/
  โโโ index.db (ููุฑุณ ุงูุจุญุซ ููุท - ุตุบูุฑ ุฌุฏุงู)
  โโโ books/
      โโโ 1/
      โ   โโโ metadata.json
      โ   โโโ pages/
      โ       โโโ 1.txt
      โ       โโโ 2.txt
      โ       โโโ ...
      โโโ 2/
      โโโ ...
```

#### ุญุฌู index.db ุงููุชููุน:
- ุจุฏูู ุงููุญุชูู: ~500 ููุบุง ููุท
- ูุญุชูู ุนูู: ุงูููุฑุณ + ุงูุจูุงูุงุช ุงููุตููุฉ

---

### 3๏ธโฃ **ุงุณุชุฎุฏุงู Whoosh (ููุชุจุฉ Python ุฎุงูุตุฉ)**

#### ุงููููุฒุงุช:
- ููุชุจุฉ Python ุฎุงูุตุฉ - ุณููุฉ ุงูุชุซุจูุช
- ูุตููุฉ ููุจุญุซ ูู ุงููุตูุต
- ุฏุนู ููุชุงุฒ ููุนุฑุจูุฉ
- ุณุฑูุนุฉ ุฌุฏุงู ูู ุงูุจุญุซ

#### ุงููุณุงูุฆ:
- ุชุบููุฑ ูุจูุฑ ูู ุงูููุฏ
- ููุฑุณ ูููุตู ุนู ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุงูุชุซุจูุช:
```bash
pip install Whoosh
```

#### ุงูุฃุฏุงุก:
- ุจุญุซ ูู 100,000 ูุณุชูุฏ: ~50 ูููู ุซุงููุฉ
- ููุฑุณุฉ ุณุฑูุนุฉ
- ุญุฌู ุงูููุฑุณ: ~20% ูู ุญุฌู ุงููุต

---

### 4๏ธโฃ **ุงุณุชุฎุฏุงู Elasticsearch (ูููุดุงุฑูุน ุงููุจูุฑุฉ ุฌุฏุงู)**

#### ุงููููุฒุงุช:
- ุงูุฃุณุฑุน ุนูู ุงูุฅุทูุงู
- ูุตูู ููุจูุงูุงุช ุงูุถุฎูุฉ
- ุฏุนู ููุชุงุฒ ููุนุฑุจูุฉ
- ูุงุจู ููุชูุณุน

#### ุงููุณุงูุฆ:
- ูุญุชุงุฌ ุฎุงุฏู ูููุตู (RAM-hungry)
- ุฃูุซุฑ ุชุนููุฏุงู ูู ุงูุฅุนุฏุงุฏ
- ูุจุงูุบุฉ ูู 30,000 ูุชุงุจ

#### ูุชุทูุจุงุช:
- RAM: ุนูู ุงูุฃูู 4 ุบูุบุง
- ูุณุงุญุฉ: ุถุนู ุญุฌู ุงูุจูุงูุงุช ุชูุฑูุจุงู

---

### 5๏ธโฃ **ุงูุชูุณูู ุญุณุจ ุงูุชุตูููุงุช**

#### ุงููููุฒุงุช:
- ููุทูู ูู ุญูุซ ุงูุงุณุชุฎุฏุงู
- ุจุญุซ ุฃุณุฑุน ูู ุชุตููู ูุญุฏุฏ

#### ุงูุจููุฉ:
```
data/
  โโโ category_ุนููุฏุฉ.db
  โโโ category_ุชูุณูุฑ.db
  โโโ category_ุญุฏูุซ.db
  โโโ ...
```

---

## ๐ ููุงุฑูุฉ ุงูุญููู

| ุงูุญู | ุงูุณุฑุนุฉ | ุณูููุฉ ุงูุชูููุฐ | ุงูุชูููุฉ | ุงูุญุฌู ุงูููุงุฆู |
|------|--------|--------------|---------|---------------|
| ุชูุณูู DB | โญโญโญโญโญ | โญโญโญโญโญ | 0 | ููุณ ุงูุญุฌู ููุฒุน |
| ุชุฎุฒูู ูุฌูู | โญโญโญโญ | โญโญโญโญ | 0 | ุฃุตุบุฑ ุจู 70% |
| Whoosh | โญโญโญโญโญ | โญโญโญ | 0 | +20% ููููุฑุณ |
| Elasticsearch | โญโญโญโญโญ | โญโญ | RAM | ุถุนู ุงูุญุฌู |
| ุญุณุจ ุงูุชุตููู | โญโญโญโญ | โญโญโญโญ | 0 | ููุณ ุงูุญุฌู ููุฒุน |

---

## ๐ฏ ุงูุชูุตูุฉ ุงูููุงุฆูุฉ

### ููุชุทุจูู ุงูููุฑู (ุงูุฃุณุฑุน): **ุงูุญู ุฑูู 1 - ุชูุณูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**

**ุงูุฃุณุจุงุจ:**
1. **ูุง ูุญุชุงุฌ ุชุบููุฑ ุงูุจููุฉ ุงูุญุงููุฉ ูุซูุฑุงู**
2. **ูุนูู ูุน ุงูููุฏ ุงูููุฌูุฏ ุจุชุนุฏููุงุช ุจุณูุทุฉ**
3. **ุณุฑุนุฉ ููุชุงุฒุฉ - ุจุญุซ ูุชูุงุฒู**
4. **ุญุฌู ูู ููู: 3-5 ุบูุบุง (ูุงุจู ููุฅุฏุงุฑุฉ)**
5. **ูุง ูุญุชุงุฌ ููุชุจุงุช ุฅุถุงููุฉ**

### ุฎุทูุงุช ุงูุชูููุฐ ุงูุณุฑูุน:

#### ุงููุฑุญูุฉ 1: ุชูุณูู ุงูุจูุงูุงุช ุงูุญุงููุฉ
```python
# ุชูุณูู shamela.db ุฅูู 30 ููู (1000 ูุชุงุจ/ููู)
python scripts/split_database.py
```

#### ุงููุฑุญูุฉ 2: ุชุนุฏูู ููุฏ ุงูุจุญุซ
```python
# ุฅุถุงูุฉ ShardedDB class
# ุจุญุซ ูุชูุงุฒู ูู ุฌููุน ุงูุฃุฌุฒุงุก
```

#### ุงููุฑุญูุฉ 3: ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก
```python
# ููุงุณ ุณุฑุนุฉ ุงูุจุญุซ ูู ุงููุธุงู ุงูุฌุฏูุฏ
```

---

## ๐ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### ุจุนุฏ ุงูุชูุณูู:
- **ุญุฌู ูู ููู:** 3-5 ุบูุบุง (ุจุฏูุงู ูู 100+)
- **ุณุฑุนุฉ ุงูุจุญุซ:** 10-20x ุฃุณุฑุน
- **ุงุณุชููุงู ุงูุฐุงูุฑุฉ:** 90% ุฃูู
- **ุงุณุชูุฑุงุฑ ุงูุจุฑูุงูุฌ:** 100% (ูุง ูุฒูุฏ ูู ุงูุฃุนุทุงู)

### ุฃุฑูุงู ุชูุฑูุจูุฉ:
```
ูุจู:
- ููู ูุงุญุฏ: 100 ุบูุบุง
- ุฒูู ุงูุจุญุซ: 30-60 ุซุงููุฉ
- RAM: 4-8 ุบูุบุง

ุจุนุฏ (ูุน ุงูุชูุณูู):
- 30 ููู ร 3.3 ุบูุบุง
- ุฒูู ุงูุจุญุซ: 2-4 ุซูุงูู (ุจุญุซ ูุชูุงุฒู)
- RAM: 500 ููุบุง - 1 ุบูุบุง
```

---

## ๐ ุญู ุฅุถุงูู: ุงูุชุฎุฒูู ุงููุฌูู (ูููุณุชูุจู)

ุฅุฐุง ุฃุฑุฏุช ุชูููู ุงูุญุฌู ุฃูุซุฑุ ูููู ุฏูุฌ **ุงูุชูุณูู + ุงูุชุฎุฒูู ุงููุฌูู**:

### ุงูุจููุฉ ุงููุซุงููุฉ:
```
data/
  โโโ shards/
  โ   โโโ shard_0/
  โ   โ   โโโ index.db (500 ููุบุง - ููุฑุณ 1000 ูุชุงุจ)
  โ   โ   โโโ content/ (ูููุงุช txt ูููุตูุฉ)
  โ   โโโ shard_1/
  โ   โโโ ...
  โโโ master.db (ูุงุนุฏุฉ ุตุบูุฑุฉ ููุชูุณูู)
```

### ุงููููุฒุงุช:
- **ุฃุตุบุฑ ุญุฌู:** 30-40 ุบูุบุง ุจุฏูุงู ูู 100+
- **ุฃุณุฑุน:** ุจุญุซ ูู ุงูููุฑุณ + ูุฑุงุกุฉ ุงููููุงุช ุนูุฏ ุงูุญุงุฌุฉ
- **ูุฑููุฉ:** ุณูููุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู

---

## ๐ง ุฃุฏูุงุช ุฅุถุงููุฉ ููุชุฑุญุฉ

### 1. ุถุบุท ุงูุจูุงูุงุช
```bash
# ุถุบุท ุงููููุงุช ุงููุตูุฉ ุจู LZMA
pip install lzma
# ุชูููู 40-60% ูู ุงูุญุฌู
```

### 2. ููุฑุณุฉ ุฃุฐูู
```python
# ุงุณุชุฎุฏุงู FTS5 ุจุฐูุงุก:
# - ููุฑุณุฉ ุงูุนูุงููู ุงูุฑุฆูุณูุฉ ููุท
# - ููุฑุณุฉ ุฌุฒุฆูุฉ ูููุญุชูู
# - ุญุฐู ุงููููุงุช ุงูุดุงุฆุนุฉ
```

### 3. ูุงุด ุฐูู
```python
# ูุงุด ุนูู ูุณุชูููู:
# - L1: ูู ุงูุฐุงูุฑุฉ (100 ููุบุง)
# - L2: ุนูู ุงููุฑุต (Redis/Memcached)
```

---

## ๐ ููุงุญุธุงุช ูููุฉ

### ุญุฏูุฏ SQLite:
- **ุงูุญุฏ ุงูุฃูุตู ุงููุธุฑู:** 281 ุชูุฑุงุจุงูุช
- **ุงูุญุฏ ุงูุนููู:** 10-20 ุบูุบุง ูุฃุฏุงุก ุฌูุฏ
- **ุงูุญุฏ ุงููุซุงูู:** 1-5 ุบูุบุง ูุฃุฏุงุก ููุชุงุฒ

### ุฃูุถู ุงูููุงุฑุณุงุช:
1. **ุชูุณูู ุงูููุงุนุฏ ุงููุจูุฑุฉ**
2. **ุงุณุชุฎุฏุงู WAL mode** (ููุฌูุฏ ุจุงููุนู โ)
3. **ููุฑุณุฉ ุฐููุฉ** (FTS5 ููุฌูุฏ โ)
4. **ูุงุด ูุนูุงู** (ููุฌูุฏ ุฌุฒุฆูุงู)
5. **ุจุญุซ ูุชูุงุฒู** (ูุทููุจ ุชูููุฐู)

---

## ๐ ุฎูุงุตุฉ

**ุงูุญู ุงููุซุงูู ููุดุฑูุนู:**
1. **ููุฑู:** ุชูุณูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (30 ููู ร 3 ุบูุบุง)
2. **ูุตูุฑ ุงููุฏู:** ุฅุถุงูุฉ ุจุญุซ ูุชูุงุฒู
3. **ูุชูุณุท ุงููุฏู:** ุชุฎุฒูู ูุฌูู (index + ูููุงุช)
4. **ุทููู ุงููุฏู:** ุงููุธุฑ ูู Whoosh ุฅุฐุง ุชุฌุงูุฒุช 100,000 ูุชุงุจ

**ููุช ุงูุชูููุฐ ุงููุชููุน:**
- ุชูุณูู ุงูุจูุงูุงุช: 2-4 ุณุงุนุงุช (ูุฑุฉ ูุงุญุฏุฉ)
- ุชุนุฏูู ุงูููุฏ: 1-2 ููู ุนูู
- ุงูุงุฎุชุจุงุฑ: ููู ูุงุญุฏ

**ุงููุชูุฌุฉ:** ูุธุงู ูุณุชูุฑ ูุณุฑูุน ูุฏุนู ููุงููู ุงููุชุจ ูุณุชูุจูุงู ๐

